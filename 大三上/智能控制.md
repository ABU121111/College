# 1.计算机控制概述
**计算机控制技术**：把**计算机技术**与**自动化控制系统**融为一体的一门综合学问，是以**计算机**为核心部件的**过程控制系统**和**运动控制系统**。
## 1.1计算机控制系统的组成
计算机控制系统是由**常规仪表控制系统**演变而来的。常规仪表控制系统包括**闭环控制**和**开环控制：**
* **闭环控制**![](assets/智能控制.assets/Pasted%20image%2020251126230308.png)
* **开环控制**![](assets/智能控制.assets/Pasted%20image%2020251126230606.png)
计算机控制系统是用**控制计算机**代替图1-1的控制器
![](assets/智能控制.assets/Pasted%20image%2020251126230631.png)
**处理步骤：** 实时数据采集、实时数据处理、实时输出控制
**硬件组成：** 主机、常规外部设备、过程输入输出通道、操作台、通信设备
![](assets/智能控制.assets/Pasted%20image%2020251126230648.png)
![](assets/智能控制.assets/Pasted%20image%2020251126230656.png)

**软件组成**：完成各种功能的计算机程序的总和，是整个系统的神经中枢。分为**系统软件**和**应用软件**
## 1.2控制系统分类
1. **数据采集系统DAS**：所有计算机控制系统的基础![](assets/智能控制.assets/Pasted%20image%2020251126230709.png)
2. **操作指导控制系统OGC**：基于数据采集系统的一种开环结构![](assets/智能控制.assets/Pasted%20image%2020251126230715.png)
3. **直接数字控制系统DDC**：用一台计算机完成对多个被控参数的数据采集，且实时决策，并通过输出通道发出控制信号以实现对生产过程的闭环控制![](assets/智能控制.assets/Pasted%20image%2020251126230722.png)
4. **监督计算机控制系统SCC**：是**OGC系统**与**常规仪表系统**或与**DDC系统**综合而成的两级系统![](assets/智能控制.assets/Pasted%20image%2020251126230731.png)
5. **分散控制系统DCS**：以微处理器为基础，借助计算机网络对生产过程集中管理和分散控制的系统
6. **现场总线控制系统FCS**：全数字化，全分散式、可交互操作和全开放式的系统
7. **计算机集成制造系统CIMS**：将企业的各环节以及生产要素集成并统一管理。
## 1.3控制器种类
 **可编程控制器**：简称PLC，是**计算机技术**与**继电逻辑控制**概念相结合的产物，其低端为**常规继电逻辑控制**的替代装置，而高端为一种高性能的**工业控制计算机**。
 **可编程调节器**：又称单路调节器、智能调节器、数字调节器
 **总线式工控机**：基于**总线技术**和**模块化结构**的一种用于工业控制的通用计算机，一般称工业控制计算机
# 2. 模拟量输出通道
**任务**：把计算机处理后的数字量信号转换成模拟量电压或电流信号，驱动相应的执行器。
**构成**：接口电路、数/模转换器、电压/电流变换器
- **多D/A结构**：D/A内部带有数据锁存器；具有数字信号转换模拟信号、信号保持作用；结构简单，转换速度快，通道独立；但所需转换器芯片较多。![](assets/智能控制.assets/Pasted%20image%2020251127230621.png)
- **共享D/A结构**：多路共用一个转换器；每个通道配有一个采样保持放大器；D/A转换器只把数字转换成模拟信号；采样保持器实现信号保持功能；节省D/A转换器，但电路复杂，精度差，可靠低、占用主机时间。
## 2.1D/A转换器
![](assets/智能控制.assets/Pasted%20image%2020251127231005.png)
![](assets/智能控制.assets/Pasted%20image%2020251127231024.png)
![](assets/智能控制.assets/Pasted%20image%2020251127231035.png)
**性能指标**：分辨率、转换精度、偏移量误差、稳定时间
- **分辨率**：$V_{out}/(2^n-1)=V_{REF}/2^n$
- **转换精度**：实际值和理论值的接近程度
- **偏移量误差**：输入数字量时，输出模拟量对于0的偏移值
- **稳定时间**：转换速度快慢的指标，输入数字量变化到输出模拟量达到终值误差1/2LSB的时间
**8位DAC0832芯片**：
![](assets/智能控制.assets/Pasted%20image%2020251127232206.png)
**12位DAC1210芯片**
![](assets/智能控制.assets/Pasted%20image%2020251127232329.png)
## 2.2接口电路
**DAC0832接口电路**
![](assets/智能控制.assets/Pasted%20image%2020251127232437.png)
```
MOV  DX，220H     //口地址如220H送入DX    
MOV  AL，[DATA]   //被转换的数据如DATA送入累加器AL  
OUT   DX，AL      //送入D/A转换器进行转换
```
**DAC1210接口电路**
低4位输入寄存器为380H，高8位输入寄存器为381H，12位DAC寄存器为384H。
先传高八位，再传低四位
![](assets/智能控制.assets/Pasted%20image%2020251127232653.png)
```
DAC： MOV  DX，0381H 
      MOV  AL，[DATA] 
      OUT  DX，AL       ；送高8位数据
      DEC  DX
      MOV  AL，[DATA+1]
      OUT  DX，AL       ；送低4位数据
      MOV  DX，0384H
      OUT  DX，AL       ；完成12位数据转换
```
## 2.3输出方式
### 2.3.1电压输出
单极性输出：$V_{out}=-B*\frac{V_{REF}}{256}$
双极性输出：$V{out2}=V_{REF}(\frac{B}{2^{8}-1}-1)$
![](assets/智能控制.assets/Pasted%20image%2020251127233408.png)
![](assets/智能控制.assets/Pasted%20image%2020251127233421.png)
### 2.3.2电流输出方式
**普通运放V/I变换电路**：0-10；4-20
![](assets/智能控制.assets/Pasted%20image%2020251127233833.png)
![](assets/智能控制.assets/Pasted%20image%2020251127233843.png)
**集成转换器V/I变换电路**
![](assets/智能控制.assets/Pasted%20image%2020251127233909.png)
## 2.4D/A转换模板
**设计原则**：安全可靠；性价比高；通用性
**通用性**：符合总线标准、接口地址可选、输出方式可选
**设计步骤**：确定性能指标、设计电路原理图、设计和制造印制线路板、焊接和调试电路板
![](assets/智能控制.assets/Pasted%20image%2020251127234214.png)
设8路D/A转换的8个输出数据存放在内存数据段BUF0~BUF7单元中，主过程已装填DS， 8 片DAC0832的通道口地址为38H~3FH，分别存放在从CH0开始的8个连续单元中，该D/A转换模板的接口子程序：
```
DOUT PROC NEAR           ; 【子程序开始】定义名为 DOUT 的子程序，属性为 NEAR（近程）

    MOV CX, 8            ; 【设置循环次数】将计数器 CX 设为 8
                         ; 代表我们要处理 8 个 DAC 通道

    MOV BX, OFFSET BUF0  ; 【初始化数据指针】将内存变量 BUF0 的偏移地址放入 BX 寄存器
                         ; 此时 BX 指向第 1 个要转换的数据

NEXT:                    ; 【循环标号】这是循环体的起始位置

    MOV AL, [BX]         ; 【取数据】把 BX 指向的内存单元中的数据读入 AL 寄存器
                         ; 例如：第1次取 BUF0 的值，第2次取 BUF1 的值...

    OUT CH0, AL          ; 【输出数据】将 AL 中的数据输出到 CH0 变量指定的端口地址
                         ; CH0 是一个内存变量，里面存着当前的端口号（如初始为 38H）
                         ; 注意：这是教材写法，实际 CPU 执行时通常需借助 DX 寄存器

    INC CH0              ; 【修改端口地址】将变量 CH0 里的值加 1
                         ; 比如从 38H 变成 39H，目的是选中下一个 DAC0832 芯片

    INC BX               ; 【修改数据指针】将 BX 寄存器的值加 1
                         ; 让指针指向下一个内存单元（如从 BUF0 移到 BUF1）

    LOOP NEXT            ; 【循环控制】
                         ; 1. 执行 CX = CX - 1
                         ; 2. 如果 CX ≠ 0，跳转回 NEXT 处继续执行
                         ; 3. 如果 CX = 0，循环结束，向下执行

    RET                  ; 【返回】子程序执行完毕，返回主程序调用处

DOUT ENDP                ; 【子程序结束】定义结束标记
```
# 3.模拟量输入通道
![](assets/智能控制.assets/Pasted%20image%2020251129002721.png)

## 3.1 信号调理电路
电流->电压信号，电阻分压法
- 无源I/V变换：![](assets/智能控制.assets/Pasted%20image%2020251129003202.png)
- 有源I/V变换：$G=1+\frac{R_4}{R_3}$![](assets/智能控制.assets/Pasted%20image%2020251129003302.png)
## 3.2多路模拟开关
构成：电平转换、姨妈驱动、开关电路
![](assets/智能控制.assets/Pasted%20image%2020251129003352.png)
## 3.3前置放大器
![](assets/智能控制.assets/Pasted%20image%2020251129004730.png)
$G=1+R_2/R_1$    $G=-R_2/R_1$
**测量放大器**：两级相乘
![](assets/智能控制.assets/Pasted%20image%2020251129005023.png)
## 3.4采样保持器
### 3.4.1采样过程
![](assets/智能控制.assets/Pasted%20image%2020251129005638.png)
采样一般取原信号最大频率的五到十倍
### 3.4.2 零阶采样保持器
采样时充电，然后保持，但是会有损失，V的损失率为$I_D/C_H$
![](assets/智能控制.assets/Pasted%20image%2020251129010037.png)
## 3.5A/D转换器
### 3.5.1 工作原理及指标
1. 逐位逼近式A/D转换![](assets/智能控制.assets/Pasted%20image%2020251129010323.png)![](assets/智能控制.assets/Pasted%20image%2020251129010340.png)
2. 双积分式A/D转换：










