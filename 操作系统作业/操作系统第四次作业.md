# 操作系统第四次作业

## 3.（考研真题） 请解释什么是重定位？为什么要重定位？

**什么是重定位**

​	重定位是指**在程序加载或运行过程中，调整其指令或数据的内存地址，使其能在正确的内存位置执行的过程**。在计算机系统中，程序通常被编译为与特定内存地址相关的代码，但实际运行时，操作系统可能无法将程序加载到预期的内存位置，因此需要进行地址调整。

**为什么需要重定位？**

1. **动态加载**：程序在运行时可能需要加载动态链接库，而这些库的加载地址在编译时无法确定，必须由操作系统动态分配。
2. **地址空间随机化**：现代操作系统为了提高安全性，会随机化程序加载的基址，防止黑客利用固定地址进行攻击。
3. **共享库**：多个程序可能共享同一个动态库，但它们的加载地址可能不同，因此库内部的地址引用必须能适应不同的基址。
4. **可执行文件加载到任意地址**：程序可能被加载到不同的内存位置，因此需要调整代码中的绝对地址引用。

## 7．什么是链接？解决了什么问题？简述主要类型及其优缺点。

**什么是链接**  

​	链接是**将多个目标文件或库文件合并成一个可执行文件或共享库的过程**。编译器首先将源代码编译成目标文件，每个目标文件包含机器代码和符号表等信息，但这些文件之间可能存在未解析的引用。链接器负责将这些目标文件组合起来，分配最终的内存地址，并生成可执行文件或动态库。

**链接主要解决了什么问题**   

1. 符号解析：确保所有函数和变量的引用都能找到对应的定义。  
2. 地址绑定：为代码和数据分配最终的内存地址，使程序能正确运行。  
3. 库文件整合：将程序所需的静态库或动态库合并到最终的可执行文件中，或建立运行时加载关系。  

**链接的主要类型及其优缺点**   

![image-20250526224222859](D:\Typora\documents\md\操作系统作业\操作系统第四次作业.assets\image-20250526224222859.png)

## 8．为什么要引入对换？对换可分为哪几种类型？  

**引入对换的具体原因包括**

1. **解决内存不足问题**：当物理内存不足时，可将暂时不用的进程数据移出内存，腾出空间供其他进程使用。
2. **提高多道程序并发度**：允许更多进程交替使用内存，提升CPU利用率。
3. **支持大程序运行**：通过将部分数据暂存到磁盘，使单个程序的内存需求不受物理内存限制。

**对换分类**

1. **进程对换**：将整个进程的地址空间（代码、数据、堆栈等）从内存换出到磁盘（对换区），或从磁盘换入内存。
2. **页面/分段对换**：基于虚拟存储技术，按页（分页系统）或段（分段系统）为单位进行对换，是现代操作系统的主流方式。

## 12--20

<img src="file:///C:\Users\Admin\Documents\Tencent Files\3412644289\nt_qq\nt_data\Pic\2025-05\Thumb\660cb76581adc672980382ed3d743586_720.jpg" alt="img" style="zoom: 50%;" />

<img src="file:///C:\Users\Admin\Documents\Tencent Files\3412644289\nt_qq\nt_data\Pic\2025-05\Thumb\bd9b311d50e426a06aa14fe53bb72df0_720.jpg" alt="img" style="zoom: 50%;" />

## 2．什么是虚拟存储器？如何实现分页式虚拟存储器？  

**什么是虚拟存储器？**

​	**虚拟存储器** 是一种由操作系统和硬件共同实现的内存管理技术，它通过动态地址映射机制，使得程序能够使用比实际物理内存更大的逻辑地址空间。虚拟存储器将程序的逻辑地址（虚拟地址）转换为物理内存地址，并允许将暂时不用的数据存储到磁盘中，从而扩展了可用内存容量。其核心目标是透明地为程序提供连续且独立的内存空间，同时支持多进程并发运行和内存保护。

**如何实现分页式存储器？**

<img src="D:\Typora\documents\md\操作系统作业\操作系统第四次作业.assets\image20250526_b6484c.png" alt="image20250526_b6484c" style="zoom: 33%;" />

1. **地址划分**：将虚拟地址和物理地址划分为固定大小的页（如4KB）。
2. **页表映射**：通过页表记录虚拟页到物理页框的映射关系。
3. **地址转换**：由MMU根据页表将虚拟地址转换为物理地址。
4. **缺页处理**：若目标页不在内存，触发缺页中断，由操作系统从磁盘加载页面并更新页表。
5. **页面置换**：当物理内存不足时，按算法选择换出页面

## 4．在请求分页系统中，为什么说在一条指令执行期间可能产生多次缺页中断？  

1. **指令本身跨页存储**
   若一条指令的机器码跨越多个内存页（如某些复杂指令或立即数较长的指令），而部分页面未加载到内存时，CPU在取指阶段就会触发缺页中断。
2. **操作数地址跨页访问**
   指令执行过程中，若操作数的逻辑地址分散在多个未驻留内存的页面中（例如数组跨页、结构体跨页或指针跳转访问不同页），每次访问新页都可能触发缺页中断。
3. **多级地址解析**
   某些指令需要多次内存访问如通过多级指针寻址，每一级指针所在的页或最终数据页未加载时均会引发缺页。
4. **系统调用或异常处理**
   执行指令时若触发系统调用或异常如除零错误，处理程序可能位于未加载的页面中，导致额外缺页中断。

## 7.简述在具有快表的请求分页系统中，将逻辑地址变换为物理地址的完整过程。 

<img src="D:\Typora\documents\md\操作系统作业\操作系统第四次作业.assets\image-20250526225225415.png" alt="image-20250526225225415" style="zoom: 50%;" />

​	首先由内存管理单元检查转换后备缓冲器TLB，若TLB中存有该逻辑页号对应的物理页框号，则直接使用该映射关系完成地址转换，这一过程称为TLB命中，可以显著减少地址转换时间。若TLB未命中，则需要进一步查询存储在内存中的页表，通过页表基址寄存器找到当前进程的页表，并根据逻辑页号查找对应的页表项。

​	若页表项显示该页面有效且已加载到物理内存中，则获取对应的物理页框号，同时将该映射关系更新到TLB中以供后续快速访问；若页表项显示该页面无效，即所需页面尚未加载到物理内存中，则触发缺页中断。此时操作系统介入处理，从磁盘交换区中调入所需页面，选择一个物理页框进行加载，并更新页表项的有效位和物理页框号等信息。

​	页面加载完成后，重新执行引发缺页的指令，此时再次进行地址转换流程。最终，通过将物理页框号与逻辑地址中的页内偏移量组合，形成完整的物理地址，用于访问实际的内存单元。整个过程既利用了TLB的快速查询特性来提高地址转换效率，又通过请求分页机制实现了虚拟存储的功能，使得程序可以使用比实际物理内存更大的地址空间。

## 10．什么是“抖动”？产生“抖动”的原因是什么？  

**什么是抖动？**

​	抖动是指操作系统因过度频繁的页面置换而导致系统性能急剧下降的现象。当系统内存资源严重不足时，进程不断发生缺页中断，迫使操作系统频繁地在内存和磁盘之间换入/换出页面，使得CPU大部分时间都浪费在页面调度上，而非执行实际任务，最终导致系统吞吐量骤降，响应时间显著增加。

**原因**

| **原因分类**         | **具体描述**                                                 |
| :------------------- | :----------------------------------------------------------- |
| **内存过载**         | 进程数量或单个进程内存需求超过物理内存容量，导致操作系统无法为所有活跃页面分配空间 |
| **局部性原理失效**   | 进程的工作集超过可用物理内存，无法保留关键页面               |
| **不合理的置换算法** | 置换算法未能正确识别热点页面，误换出即将访问的页面           |
| **多道程序度过高**   | 并发进程过多，每个进程分配的物理页框不足，无法维持其工作集   |
| **I/O瓶颈**          | 磁盘I/O速度远低于内存访问速度，页面换入/换出操作堆积         |

## 13.15.18.19.20.21

![image-20250526230126968](D:\Typora\documents\md\操作系统作业\操作系统第四次作业.assets\image-20250526230126968.png)



<img src="D:\Typora\documents\md\操作系统作业\操作系统第四次作业.assets\image-20250526230135916.png" alt="image-20250526230135916" />

![image-20250526230342301](D:\Typora\documents\md\操作系统作业\操作系统第四次作业.assets\image-20250526230342301.png)

![image-20250526230401915](D:\Typora\documents\md\操作系统作业\操作系统第四次作业.assets\image-20250526230401915.png)